apply plugin: 'java'
apply plugin: 'pegasus'

ext.apiProject = project(':api')
pegasus.main.idlOptions.addIdlItem(['com.example.fortune.impl'])

dependencies {
  compile project(path: ':api', configuration: 'dataTemplate')

  compile "com.linkedin.pegasus:r2:1.7.0"
  compile "com.linkedin.pegasus:r2-jetty:1.7.0"
  compile "com.linkedin.pegasus:restli-server:1.7.0"
  compile "com.linkedin.pegasus:restli-common:1.7.0"
  compile "com.linkedin.pegasus:pegasus-common:1.7.0"
  restTools "com.linkedin.pegasus:restli-tools:1.7.0"

  // need to figure out why this is not already in the classpath..
 compile files("${System.properties['java.home']}/../lib/tools.jar")
}

task startFortunesServer(type: JavaExec) {
  main = 'com.example.fortune.RestLiFortunesServer'
  classpath = sourceSets.main.runtimeClasspath
  standardInput = System.in
}
