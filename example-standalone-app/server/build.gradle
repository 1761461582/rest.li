apply plugin: 'java'
apply plugin: 'pegasus'

ext.apiProject = project(':api')
pegasus.main.idlOptions.addIdlItem(['com.linkedin.restli.example.impl'])

dependencies {
  compile project(path: ':api', configuration: 'dataTemplate')

  compile "com.linkedin.pegasus:data:1.6.14"
  compile "com.linkedin.pegasus:r2:1.6.14"
  compile "com.linkedin.pegasus:r2-jetty:1.6.14"
  compile "com.linkedin.pegasus:d2:1.6.14"
  compile "com.linkedin.pegasus:data-transform:1.6.14"
  compile "com.linkedin.pegasus:restli-docgen:1.6.14"
  compile "com.linkedin.pegasus:restli-server:1.6.14"
  compile "com.linkedin.pegasus:restli-client:1.6.14"
  compile "com.linkedin.pegasus:restli-common:1.6.14"
  compile "com.linkedin.pegasus:pegasus-common:1.6.14"

  restTools "com.linkedin.pegasus:restli-tools:1.6.14"

  compile "log4j:log4j:1.2.15"
  compile "javax.inject:javax.inject:1"
  compile "com.linkedin.parseq:parseq:1.2."
  compile "org.apache.zookeeper:zookeeper:3.3.0"
  testCompile "org.testng:testng:6.4"
  testCompile "org.easymock:easymock:3.1"

  // need to figure out why this is not already in the classpath..
 compile files("${System.properties['java.home']}/../lib/tools.jar")
}

task startFortuneServer(type: JavaExec, dependsOn: 'build') {
  main = 'com.linkedin.restli.example.RestLiFortuneServer'
  classpath = sourceSets.main.runtimeClasspath
  standardInput = System.in
}
